<!doctype html>
<html>
	<head>
		<meta charset="utf-8"/>
		<title>crosscall host</title>
	</head>
	<body>
		<script src="node_modules/requirejs/require.js"></script>
		<script>
			require(["./dist/host"], ({default: CrosscallHost, ...mod}) => {

				const crosscallHost = new CrosscallHost({

					// functionality exposed for clients to call
					callee: {
						testTopic: {
							async test1(x) { return x },
							async test2(x) { return x + 1 },
							async test3() { return Date.now() }
						}
					},

					// each client origin gets its own callee access permission
					permissions: [{
						origin: new RegExp(window.location.origin, "i"),
						allowed: {
							testTopic: ["test1", "test2", "test3"]
						},
						allowedEvents: []
					}]
				})

			})
		</script>
	</body>
</html>
